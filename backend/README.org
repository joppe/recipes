#+title: Recipes

* Table of contents :toc:
  - [[#database][Database]]
  - [[#01-things-to-do][Things to do]]

** Database
#+begin_src plantuml :results output :file entities.png :output-dir image
hide circle

entity "Chef" as chef {
  name: text
  skill: int
}

entity "Media" as media {
  title: text
  type: text
  url: text
}

entity "Meal" as meal {
  date: date
  score: int
}

entity "Tag" as tag {
  title: text
}

entity "Recipe" as recipe {
  name: text
  preparation_time: int
  cooking_time: int
  difficulty: int
  course: text
  servings: int
  source: text
}

entity "Unit" as unit {
  name: string
  abbreviation: string
}

entity "Product" as product {
  name: string
  description: string
}

entity "Instruction" as instruction {
  order: int
  text: string
}

entity "Ingredient" as ingredient {
  amount: int
  preraration: text
}

chef        |o--o{ media
meal        ||--o{ recipe
meal        ||--o{ chef
recipe      |o--o{ media
recipe      }o--o{ tag
product     |o--o{ media
instruction ||--o{ recipe
instruction |o--o{ media
ingredient  ||--o{ recipe
ingredient  ||--o{ product
ingredient  ||--o{ unit
#+end_src

#+RESULTS:
[[file:image/entities.png]]

** [0/1] Things to do
- [ ] Optimizations
  - [ ] Dataloader
  - [ ] When deleting a Media record set *media_id* to ~null~
  - [ ] Move logic for Postgres to separate functions
  - [ ] Use prisma types for GraphQL resolvers
  - [ ] Use ~@map~ and ~@@map~ in the schema to use snake case in postgres and pascal case in TypeScript
- [0/8] Validations
  - [ ] String min length
  - [ ] String max length
  - [ ] String match regex
  - [ ] Number is int
  - [ ] Number greater then
  - [ ] Number greater or equal then
  - [ ] Number smaller then
  - [ ] Number smaller or equal then
- [20/40] GraphQL
  - [ ] Chef getMany
  - [ ] Chef getOne
  - [ ] Chef create
  - [ ] Chef delete
  - [ ] Chef update
  - [ ] Ingredient getMany
  - [ ] Ingredient getOne
  - [ ] Ingredient create
  - [ ] Ingredient delete
  - [ ] Ingredient update
  - [ ] Instruction getMany
  - [ ] Instruction getOne
  - [ ] Instruction create
  - [ ] Instruction delete
  - [ ] Instruction update
  - [ ] Meal getMany
  - [ ] Meal getOne
  - [ ] Meal create
  - [ ] Meal delete
  - [ ] Meal update
  - [X] Media getMany
  - [X] Media getOne
  - [X] Media create
  - [X] Media delete
  - [X] Media update
  - [X] Product getMany
  - [X] Product getOne
  - [X] Product create
  - [X] Product delete
  - [X] Product update
  - [X] Recipe getMany
  - [X] Recipe getOne
  - [X] Recipe create
  - [X] Recipe delete
  - [X] Recipe update
  - [X] Unit getMany
  - [X] Unit getOne
  - [X] Unit create
  - [X] Unit delete
  - [X] Unit update
